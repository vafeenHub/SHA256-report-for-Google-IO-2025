# Report about sha-256 on Google I/O 2025 conference

--- 

# SHA-256 и использование соли для хеширования паролей

## Что такое SHA-256?

**SHA-256** — это криптографическая хеш-функция семейства SHA-2, разработанная совместно NSA и NIST в 2001 году. Она принимает на вход сообщение любой длины и возвращает фиксированный 256-битный (32-байтный) хеш, который выглядит как строка из 64 шестнадцатеричных символов.

### Основные свойства SHA-256

- **Однонаправленность:** По хешу невозможно восстановить исходное сообщение.
- **Устойчивость к коллизиям:** Крайне сложно найти два разных сообщения с одинаковым хешем.
- **Устойчивость к прообразу:** По заданному хешу нельзя найти исходное сообщение.
- **Аваланш-эффект:** Даже небольшое изменение во входных данных кардинально меняет итоговый хеш.

### Как работает SHA-256

1. **Дополнение (padding):** Сообщение дополняется до длины, кратной 512 битам. В конце добавляется длина исходного сообщения.
2. **Инициализация:** Используются восемь начальных 32-битных значений, полученных из дробных частей квадратных корней первых восьми простых чисел.
3. **Разделение на блоки:** Сообщение разбивается на блоки по 512 бит.
4. **Обработка блоков:** Для каждого блока выполняется серия из 64 раундов, включающих битовые операции (AND, OR, XOR), сдвиги и сложения по модулю.
5. **Финальный хеш:** После обработки всех блоков получается итоговый 256-битный хеш.

---

## Что такое "соль" и зачем она нужна?

**Соль (salt)** — это случайная или псевдослучайная строка, которая добавляется к паролю перед хешированием. В приведённом ниже коде соль формируется из имени и фамилии пользователя.

### Задачи соли

- **Защита от атак по словарям и радужным таблицам:** Даже если у двух пользователей одинаковый пароль, их хеши будут разными благодаря разной соли.
- **Защита от перебора:** Даже если злоумышленник получит хеш, ему придётся подбирать не только пароль, но и соль, что значительно усложняет задачу.
- **Повышение безопасности:** Соль делает каждый хеш уникальным, даже если пароли совпадают.

---

## Пример кода на Kotlin

```kotlin
/**
 * Класс для генерации ХЭШ-кода паролей пользователя с использованием соли
 * @param firstName [Имя пользователя для генерации соли для Хэша]
 * @param lastName [Фамилия пользователя для генерации соли для ХЭШа]
 */
class PasswordHasher(
    private val firstName: String, private val lastName: String
) {


    /**
     * [SHA-256](https://developer.android.com/privacy-and-security/cryptography#kotlin) - хэширование, рекомендованное Google
     */
    private fun String.getSHA256Hash(): String =
        MessageDigest.getInstance("SHA-256").digest(toByteArray()).fold("") { str, it ->
            str + "%02x".format(it)
        }

    /**
     * Алгоритм генерации "Соли", которая нужна для того,
     * чтобы усложнить подбор пароля
     */
    private fun String.addSaltToMessage(): String {
        return "${firstName}${this}${lastName}"
    }

    /**
     * Функция получения hash'а пароля
     * @param password [Пароль, хэш которого нужно получить]
     */
    fun passwordToHash(password: String): String = password.addSaltToMessage().getSHA256Hash()
}
```


## Кратко о процессе хеширования с солью

1. **Пароль** пользователя.
2. **Соль** формируется из имени и фамилии пользователя.
3. **Пароль и соль** объединяются в одну строку.
4. **SHA-256** применяется к получившейся строке.
5. **Результат** — уникальный хеш, который хранится в системе.



Этот подход обеспечивает безопасное хранение паролей и защищает пользователей от атак по словарям и радужным таблицам.
